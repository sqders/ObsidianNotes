Данные операции удобно воспринимать как **отложенные** – они выполнятся когда их запустит конечная терминальная операция над стримом.

**Провести операцию над каждым элементом** `peek()` Аналог `forEach()`, только промежуточный (**нетерминальный**)  
Если в метод `peek()` передать функцию `System.out::println`, тогда все объекты будут выводиться на экран в момент, когда они будут проходить через поток.

```java
Stream.of("a", "b", "c").peek(System.out::println);
```

**Преобразовать данные из одного типа в другой** `map()   `Можно передать функцию, которая преобразовывает один тип данных в другой.

```java
Stream.of(1, 2, 3).map((x) -> String.valueOf(x));

Stream.of(1, 2, 3).map(String::valueOf);        // лямбда выражение

Stream.of("1", "2", "3").map(Integer::parseInt);
```

**Отфильтровать элементы** `filter()`

```java
Stream.of(1, 2, 3, 4, 5).filter(n -> n < 4);    // [1, 2, 3]
```

**Удалить дублирующиеся элементы** `distinct()`

```java
Stream.of(1, 2, 3, 2, 4, 2, 5).distinct();      // [1, 2, 3, 4, 5]
```

**Сортировка** и **обратная сортировка элементов** `sorted()`

```java
Stream.of(4, 2, 3, 5, 1).sorted();              // [1, 2, 3, 4, 5]

Stream.of(4, 2, 3, 5, 1).sorted(Comparator.reverseOrder())
```

**Лимит количества элементов** `limit()`

```java
Stream.of(1, 2, 3, 4, 5, 6).limit(3);            // [1, 2, 3]
```

**Пропустить первые элементы** `skip()`

```java
Stream.of(1, 2, 3, 4, 5).skip(2);                // [3, 4, 5]
```

**Сопоставить поток с развернутым потоком** `flatMap()   `
Возвращает **поток**, состоящий из результатов замены каждого элемента этого потока содержимым **сопоставленного** потока, полученного путем применения предоставленной **функции** **сопоставления** к каждому элементу.

```java
List<String> petNames = person.stream()
        .flatMap(person -> person.getPetName().stream())
        .collect(Collectors.toList());

System.out.println(petNames);             // [pet1, pet2, pet3, pet4, pet5]
```

Таким образом можно развернуть двухмерный массив

```java
Integer[][] array2d = new Integer[][] {
                {1, 2, 3},
                {4, 5}
};

Arrays.stream(array2d).flatMap(Arrays::stream);    // [1, 2, 3, 4, 5]
```