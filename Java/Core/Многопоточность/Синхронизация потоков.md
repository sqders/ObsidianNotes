# Что это?
**Синхронизация потоков** - это запуск работы потоков относительно друг друга и *работа со значениями*. Призвана устранить проблему потери данных при одновременных обращениях потоков к ресурсу

Синхронизация сильно замедляет программу.
# Зачем
**Отсутствие синхронизации потоков не дает сбоев при одновременном доступе к ресурсу.** Отсутствие синхронизации порождает потерю информации при подобных операциях

Т.к. потоки изначально не синхронизированны, то доступ к ресурсам может осуществляться хаотично и это может ломать логику. Например, попытка изменения ресурса при его чтении/записи в другом потоке.
# Пример - проблема когерентности (совпадения) кэшей
Имеем 2 потока, например, основной и созданный нами. Созданный нами поток имеет `boolean` переменную `running`, которая является флагом выполнения этого потока в бесконечном цикле. Когда `running = false`, поток должен завершить свою работу. ***Такая практика ОЧЕНЬ ПЛОХА***.
### Почему?
Процессор распределяет потоки по ядрам и может занести переменную `running` в cash процессора, а значит сохранить её в состоянии `true`. И если изменить значение этой переменной в main потоке, который на другом процессоре, то исполняемый поток не узнает об изменении, т.к. будет смотреть переменную `running` **из хэша**, которая будет неактуальна. Это самый просто пример, зачем же нужна синхронизация потоков при работе с общими ресурсами и зачем нужно ключевое слово [[Volatile|volatile]].
# Способы контроля
1. [[Volatile]] - это ключевое слово используется на ресурсах, когда к ним одновременно обращаются для **ЧТЕНИЯ И ЗАПИСИ**. Пример выше.
2. [[Synchronized]] - это ключевое слово используется на ресурсах, когда к ним одновременно обращаются для **ЗАПИСИ**.
3. [[Semaphore]]
4. Барьеры
5. Замки

#Thread #Многопоточность #ExtendedJava #синхронизацияПотоков 