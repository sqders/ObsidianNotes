# Зачем
Чтобы не держать длинный Connection с БД, можно просто кешировать результат ответа БД, закрыть Connection, сделать нудную обработку и потом уже обновить данные в БД. Это лучшая практика. Также, если мы хотим передать ResultSet для обработки в другой метод - то соединение с БД будет закрыто и взаимодействие с ResultSet будет невозможным, будет возбуждено исключение.
# Реализация
Мы можем кешировать результат многими способами, все они на скрине:
![[Pasted image 20230623110025.png]]
Все эти классы - **наследники `RowSet`**. WebRowSet хранит инфу в XML формате, CachedRowSet просто в памяти. При чем мы можем вызывать SQL команды для внутреннего содержимого CachedRowSet - сделать выборку по данным, что-то удалить, изменить, ОДНАКО для этого нужно указать данные Connection, т.к. при этих запросах, он ходит в БД через методы `setUsername(), setUrl() ,setPassword()`.
## Использование CachedRowSet
1. Создаем объект через фабрику
2. Передаем в метод `.populate(ResultSet set)` необходимый ResultSet для кеширования

Чтобы изменять/выбирать какие-то данные внутри CachedResultSet, используем методы, описанные ниже. **ОДНАКО ЧТОБЫ СОХРАНИТЬ ЭТИ ИЗМЕНЕНИЯ В БД, НЕОБХОДИМО ВЫЗВАТЬ `acceptChanges()`**
### Выборка
![[Pasted image 20230623110731.png]]
### Изменение
1. Указываем имя таблицы
2. Указываем строку для изменения
3. Изменяем
![[Pasted image 20230623110933.png]]
### Применение изменений в БД
![[Pasted image 20230623111109.png]]
2 варианта: 1 - указать заранее; 2 - указать на месте , передав `Connection` самостоятельно через `DriverManager`