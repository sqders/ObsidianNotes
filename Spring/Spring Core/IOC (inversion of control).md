Inversion of control - это паттерн проектирования и у него есть 2 типа.
## Поиск зависимостей 
Более старый тип паттерна, где компонент получает ссылку на зависимость. У него есть 2 реализации:  **извлечение зависимостей** и **контекстный по­иск зависимостей**
#### Извлечение зависимостей
В случае извлечение зависимостей, **зависимости извлекаются из реестра** по мере необходимости через прикладной интерфейс JNDI API для поиска компонента ЕJВ.
 ![[Pasted image 20231122000752.png]]

```java
package  corn.apress.prospringS.chЗ ; 
import  org.springfrarnework.context.ApplicationContext; 
import  org.springfrarnework.context.support.ClassPathXrnlApplicationContext; 
public class  DependencyPull  { 
public static void  main(String .. .  args)  { 
     ApplicationContext  ctx  =  new 
     ClassPathXmlApplicationContext("spring/app-context .xml" ) ; 
     MessageRenderer  mr  = ctx.getBean("renderer",  MessageRenderer.class); 
     mr.render(); 
  }
}
```
#### Контекстный поиск зависимостей
В известной мере контекстный nоиск зависимостей (CDL) nодобен извлечению 
зависимостей, но в этом случае поиск осуществляется в контейнере, управляющем ресурсом, а не только в каком-то центральном реестре. Как правило,  контекстный поиск зависимостей производится в установленной точке.
![[Pasted image 20231122001326.png]]
*Механизм контекстного поиска приводится в действие через реализацию в компо­ненте интерфейса, аналогично nриведенному в следующем фрагменте кода:* 
```java
package com.apress.prospringS.chЗ; 
public interface  ManagedComponent  { 
   void performLookup(Container  container) ; 
}
```
Реализуя этот интерфейс, комnонент извещает контейнер, что ему требуется полу­чить зависимость. Контейнер обычно предоставляется базовым сервером приложе­ний (например, Tomcat или JBoss) или каркасом (в частности, Spring). 
В следующем фрагменте кода приведен простой интерфейс Container, предоставляющий услуги поиска зависимостей:
```java
package  com.apress.prospring5.ch3; 
public interface  Container  { 
   Object  getDependency{String  key)
}
```
Как только контейнер будет готов передать зависимости компоненту, он вызовет 
метод performLookup ()  по очереди для каждого компонента. И тогда компонент 
сможет искать свои зависимости, используя интерфейс Container, как показано в 
следующем фрагменте кода: 
```java
package  com.apress.prospring5.ch3; 
public class  ContextualizedDependencyLookup 
implements  ManagedComponent  { 
	private  Dependency  dependency; 
	}
@Override 
public void  performLookup(Container  container)  { 
	this.dependency =  (Dependency) 
	container.getDependency("myDependency"); 
	}
@Override 
public String  toString ()  { 
	return  dependency.toString(); 
    }
}
```
## Внедрение зависимостей
Тип IoC, при котором зависимости внедряются в компонент контейнером инверсии управления.
У внедрения зависимостей имеются две разновидности: через конструктор и через метод установки
#### Внедрение зависимостей через конструктор
Внедрение зависимостей через конструктор происходит в том случае, когда за­висимости предоставляются компоненту в его конструкторе (или нескольких кон­структорах). С этой целью в компоненте объявляется один или ряд конструкторов, 
получающих в качестве аргументов его зависимости, а контейнер инверсии управле­ния передает зависимости компоненту при получении его экземпляра

#### Внедрение зависимостей через метод установки
При внедрении зависимостей через метод установки контейнер инверсии управ­ления внедряет зависимости компонента через методы установки в стиле компонен­тов JavaBeans.  Методы установки компонента отражают зависимости, которыми мо­жет управлять контейнер инверсии управления.

### Выбор между внедрением зависимостей через конструктор и метод установки 
